

## 📋 系統簡介

一套簡單易用的勞務報酬單管理系統，讓你：
- **後台**：輸入金額 → 自動算稅 → 產生連結
- **對方**：開連結 → 填資料 → 上傳證件 → 簽名
- **會計**：批次匯出 Excel 報稅


---

## ✨ 功能特色

### 🖥️ 後台管理（員工操作）

| 功能 | 說明 |
|-----|------|
| 公司切換 | 左上角可切換 |
| 新增勞報單 | 填寫：領款人姓名、金額、所得類別、服務期間、支付日期 |
| 自動計算 | 系統即時計算代扣所得稅、二代健保補充保費 |
| 產生連結 | 一鍵產生簽名連結，複製發送給領款人 |
| 勞報單列表 | 查看所有勞報單狀態（草稿/待簽名/已簽名）|
| 聯絡人管理 | 管理常用領款人資料 |
| 批次匯出 | 勾選多筆已簽名勞報單 → 匯出 Excel 給會計師 |
| PDF 下載 | 下載單筆勞報單 PDF |

### 📱 外部簽名頁（領款人操作，免登入）

| 功能 | 說明 |
|-----|------|
| 查看勞報單 | 顯示金額明細、代扣稅額、實付金額 |
| 填寫資料 | 姓名、身分證、電話、Email、戶籍地址 |
| 銀行資料 | 銀行名稱、分行、帳號 |
| 上傳證件 | 身分證正面、身分證反面、銀行存摺封面（支援拍照）|
| 手動簽名 | 觸控螢幕或滑鼠簽名 |
| ⭐ 自動帶出 | 輸入身分證號 → 自動帶出之前填過的資料，只需簽名！|

### 📊 會計師匯出資料

Excel 匯出包含：
- 領款人基本資料（姓名、身分證字號、戶籍地址）
- 所得類別與金額明細
- 代扣所得稅金額
- 二代健保補充保費金額
- 銀行匯款資訊（銀行、分行、帳號）
- 簽名日期

---

## 💰 2025 年扣繳規則

### 所得稅代扣

| 所得類別 | 說明 | 起扣點 | 稅率 |
|---------|------|-------|-----|
| 50 兼職所得 | 兼職薪資、臨時工資 | ≥ 88,501 元 | 5% |
| 9A 執行業務 | 講師費、顧問費、設計費 | ≥ 20,010 元 | 10% |
| 9B 稿費 | 稿費、版稅、演講鐘點費 | ≥ 20,010 元 | 10% |
| 92 其他所得 | 競賽獎金、其他勞務 | 免扣繳 | - |

### 二代健保補充保費

| 所得類別 | 起扣點 | 費率 |
|---------|-------|-----|
| 50 兼職所得 | ≥ 28,590 元（基本工資）| 2.11% |
| 9A 執行業務 | ≥ 20,000 元 | 2.11% |
| 9B 稿費 | ≥ 20,000 元 | 2.11% |
| 92 其他所得 | ≥ 20,000 元 | 2.11% |

> 💡 **工會成員免扣**：若領款人有加入職業工會，可免扣二代健保補充保費

---

## 🔄 使用流程

```
┌─────────────────────────────────────────────────────────────┐
│                        後台操作                              │
├─────────────────────────────────────────────────────────────┤
│  1. 選擇公司                       │
│                         ↓                                   │
│  2. 新增勞報單 → 填寫金額、所得類別、支付日期                   │
│                         ↓                                   │
│  3. 系統自動計算 → 代扣所得稅、二代健保                        │
│                         ↓                                   │
│  4. 產生簽名連結 → 複製發送給領款人（LINE、Email）              │
└─────────────────────────────────────────────────────────────┘
                          ↓
┌─────────────────────────────────────────────────────────────┐
│                     領款人操作（免登入）                       │
├─────────────────────────────────────────────────────────────┤
│  5. 開啟連結 → 查看勞報單資訊                                 │
│                         ↓                                   │
│  【第一次】填寫完整資料 + 上傳證件 + 簽名                       │
│  【第二次起】自動帶出舊資料 → 確認後直接簽名！                   │
└─────────────────────────────────────────────────────────────┘
                          ↓
┌─────────────────────────────────────────────────────────────┐
│                      會計師匯出                              │
├─────────────────────────────────────────────────────────────┤
│  6. 後台勾選已簽名的勞報單                                    │
│                         ↓                                   │
│  7. 批次匯出 Excel → 交給會計師報稅                           │
└─────────────────────────────────────────────────────────────┘
```

---

## 🛠️ 技術架構

| 項目 | 技術 |
|-----|------|
| 前端框架 | Next.js 14 (App Router) |
| 程式語言 | TypeScript |
| 樣式 | Tailwind CSS |
| 後端/資料庫 | Supabase (PostgreSQL) |
| 認證 | Supabase Auth (Google OAuth) |
| 檔案儲存 | Supabase Storage |
| 部署 | Vercel |

---

---

## 🚀 部署步驟

### 1. Supabase 設定（沿用現有專案）

你已經有 Supabase 專案和 Google OAuth：
- **Project URL**: `https://lexcvcinmphkmavgswgn.supabase.co`
- **Google OAuth**: 已設定完成 ✅


### 2. 本地開發

```bash
# 複製專案
git clone <your-repo>
cd labor-report

# 安裝依賴
npm install

# 設定環境變數
cp .env.example .env.local
# 編輯 .env.local 填入 Supabase 連線資訊

# 啟動開發伺服器
npm run dev
```

### 3. 環境變數

```env
# .env.local
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
NEXT_PUBLIC_APP_URL=http://localhost:3000
```




